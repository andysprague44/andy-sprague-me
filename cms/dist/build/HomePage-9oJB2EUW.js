const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["HomePage-BdjepvRL.js","strapi-CfbjzxRh.js","strapi-DU8PNWtk.css","useLicenseLimitNotification-BnV2BfSc.js","isNil-DuKQ-_AG.js","WidgetHelpers-ByKrZM9K.js","Ornaments-BHm53JWu.js"])))=>i.map(i=>d[i]);
import{bo as m,a as T,b as y,j as e,af as E,ag as H,ck as I,a7 as u,e as d,T as x,D as G,b7 as _,an as P,Q as v,as as w,P as R,B as b,G as k,r as h,cl as A,aZ as L,_ as D}from"./strapi-CfbjzxRh.js";import{W as f}from"./WidgetHelpers-ByKrZM9K.js";import{L as O,N as M,V as N,S as g}from"./Ornaments-BHm53JWu.js";const W=()=>{const s=m("GuidedTourHomepage",o=>o.guidedTourState),a=m("GuidedTourHomepage",o=>o.setSkipped),{formatMessage:n}=T(),{trackUsage:r}=y(),t=Object.entries(O).map(([o,i])=>({key:o,title:i.home.title,content:e.jsx(E,{onClick:()=>r(i.home.trackingEvent),tag:H,to:i.home.cta.target,endIcon:e.jsx(I,{}),children:n(i.home.cta.title)}),isDone:Object.values(s[o]).every(c=>c===!0)})),l=t.findIndex(o=>!o.isDone),p=()=>{a(!0),r("didSkipGuidedtour")};return e.jsxs(u,{hasRadius:!0,shadow:"tableShadow",paddingTop:7,paddingRight:4,paddingLeft:7,paddingBottom:4,background:"neutral0",children:[e.jsxs(d,{direction:"column",alignItems:"stretch",gap:6,children:[e.jsx(x,{variant:"beta",tag:"h2",children:n({id:"app.components.GuidedTour.title",defaultMessage:"3 steps to get started"})}),e.jsx(u,{children:t.map((o,i)=>{const c=B(l,i);return e.jsxs(u,{children:[e.jsxs(d,{children:[e.jsx(u,{minWidth:"3rem",marginRight:5,children:e.jsx(M,{state:c,children:i+1})}),e.jsx(x,{variant:"delta",tag:"h3",children:n(o.title)})]}),e.jsxs(d,{alignItems:"flex-start",children:[e.jsx(d,{justifyContent:"center",minWidth:"3rem",marginBottom:3,marginTop:3,marginRight:5,children:i===t.length-1?null:e.jsx(N,{state:c})}),e.jsx(u,{marginTop:2,children:c===g.IS_ACTIVE?o.content:null})]})]},o.key)})})]}),e.jsx(d,{justifyContent:"flex-end",children:e.jsx(G,{variant:"tertiary",onClick:p,children:n({id:"app.components.GuidedTour.skip",defaultMessage:"Skip the tour"})})})]})},B=(s,a)=>s===-1?g.IS_DONE:a<s?g.IS_DONE:a>s?g.IS_NOT_DONE:g.IS_ACTIVE,V=()=>{const s=m("HomePage",t=>t.guidedTourState),a=m("HomePage",t=>t.isGuidedTourVisible),n=m("HomePage",t=>t.isSkipped);return!Object.values(s).every(t=>Object.values(t).every(l=>l))&&a&&!n?e.jsx(W,{}):null},U=({title:s,icon:a=A,permissions:n=[],children:r,link:t})=>{const{formatMessage:l}=T(),p=h.useId(),o=a,[i,c]=h.useState("loading"),S=P("WidgetRoot",j=>j.checkUserHasPermissions);return h.useEffect(()=>{const j=async()=>{const C=(await S(n)).length>=n.length;c(C?"granted":"forbidden")};!n||n.length===0?c("granted"):j()},[S,n]),e.jsxs(d,{width:"100%",hasRadius:!0,direction:"column",alignItems:"flex-start",background:"neutral0",borderColor:"neutral150",shadow:"tableShadow",tag:"section",gap:4,padding:6,"aria-labelledby":p,children:[e.jsxs(d,{direction:"row",gap:2,justifyContent:"space-between",width:"100%",tag:"header",children:[e.jsxs(d,{gap:2,children:[e.jsx(o,{fill:"neutral500","aria-hidden":!0}),e.jsx(x,{textColor:"neutral500",variant:"sigma",tag:"h2",id:p,children:l(s)})]}),t&&e.jsx(x,{tag:L,variant:"omega",textColor:"primary600",style:{textDecoration:"none"},to:t.href,children:l(t.label)})]}),e.jsxs(u,{width:"100%",height:"261px",overflow:"auto",tag:"main",children:[i==="loading"&&e.jsx(f.Loading,{}),i==="forbidden"&&e.jsx(f.NoPermissions,{}),i==="granted"&&r]})]})},F=({component:s})=>{const[a,n]=h.useState(null);h.useEffect(()=>{(async()=>{const l=await s();n(()=>l)})()},[s]);const r=a;return r?e.jsx(r,{}):e.jsx(f.Loading,{})},$=()=>{const{formatMessage:s}=T(),a=P("HomePageCE",t=>t.user),n=a?.firstname??a?.username??a?.email,r=v("UnstableHomepageCe",t=>t.widgets.getAll);return e.jsxs(w,{children:[e.jsx(R.Title,{children:s({id:"HomePage.head.title",defaultMessage:"Homepage"})}),e.jsx(b.Header,{title:s({id:"HomePage.header.title",defaultMessage:"Hello {name}"},{name:n}),subtitle:s({id:"HomePage.header.subtitle",defaultMessage:"Welcome to your administration panel"})}),e.jsx(b.Content,{children:e.jsxs(d,{direction:"column",alignItems:"stretch",gap:8,paddingBottom:10,children:[e.jsx(V,{}),e.jsx(k.Root,{gap:5,children:r().map(t=>e.jsx(k.Item,{col:6,s:12,children:e.jsx(U,{title:t.title,icon:t.icon,permissions:t.permissions,link:t.link,children:e.jsx(F,{component:t.component})})},t.uid))})]})})]})},z=()=>{const s=_($,async()=>(await D(async()=>{const{HomePageEE:a}=await import("./HomePage-BdjepvRL.js");return{HomePageEE:a}},__vite__mapDeps([0,1,2,3,4,5,6]))).HomePageEE);return s?e.jsx(s,{}):null};export{z as HomePage,$ as HomePageCE,U as WidgetRoot};
